{% extends 'basic.html' %}
{% load static %}
{% block content %}
    <div class="main">
        <section class="mb-250">
            <p class="heading text h2 color-w text-center mb-35">Kolibri is a finished product</p>
            <p class="m-w450 text-center mb-25">We did not launch ICO, but released a finished product, because we prefer to act without risk and develop our own solutions</p>
            <p class="m-w450 text-center">Our goal is to unite payment systems, banking and people to provide fast and cheap transactions</p>
        </section>
        <section class="mb-250">
            <p class="heading text h2 color-w text-center mb-35">High transactions speed with low fees</p>
            <p class="m-w450 text-center mb-25">Combined consensus and network readiness for high loads delivers over 1500tps</p>



            <div class="circle-block flex-block">
                <div class="text-center">
                    <div class="counter" data-cp-percentage="3" data-cp-color="#3FC4FF">

                    </div>
                    <p class="text px24 color-w mb-15">Bitcoin</p>
                    <p>more than 20 minutes to process a transaction</p>
                </div>
                <div class="text-center">
                    <div class="counter" data-cp-percentage="90" data-cp-color="#3FC4FF">
                    </div>
                    <p class="text px24 color-w mb-15">iToken</p>
                    <p>less than 20 second to process a transaction</p>
                </div>

            </div>
        </section>
        <section class="mb-250">
            <p class="heading text h2 color-w text-center mb-35">KolibriCoin aims to improve efficiency<br>
                in many business areas, from<br>
                online stores to banks.</p>

            <p class="m-w600 text-center mb-50">High transaction speed for less transaction of factors such as the PoS-included algorithm and a completely new algorithm that allows the amount of data to be transferred (compared to the standard protocols of most cryptocurrencies and their tokens) with a lower transaction volume, node verification is also simplified.</p>
{#            <p class="m-w600 text-center mb-50">Thus, on the proven Ethereum blockchain, we got a completely new tool, with a production ~ 1000TPS, ideal for working with fast and inexpensive payments</p>#}




        </section>
        <section class="mb-250">
            <p class="heading text h2 color-w text-center mb-35">Watch your transactions<br>etherscan.io</p>

            <p class="m-w600 text-center mb-50">The service allows you to track absolutely all information on the Ethereum network. With the blockchain technology, all transactions remain transparent. The Ethereum network, on the basis of the blockchain of which iToken works, in turn, has established itself as a reliable tool for implementing projects.</p>

            <a href="" @click.prevent="modal_register=true" class="btn btn-outline center">try now</a>


        </section>
{#        <section class="mb-250">#}
{#            <p class="heading text h2 color-w text-center mb-100">Where to buy iToken?</p>#}
{#            <div class="container">#}
{#                <div class="where-to-buy">#}
{#                    <div class="where-to-buy__item">#}
{#                        <img class="mb-30" src="{% static 'images/w1.png' %}" alt="">#}
{#                        <p class="mb-100">Metamask</p>#}
{#                        <a href="" class="btn btn-outline">coming soon</a>#}
{##}
{#                    </div>#}
{#                    <div class="where-to-buy__item best-price">#}
{#                        <img class="mb-30" src="{% static 'images/w2.png' %}" alt="">#}
{#                        <p class="mb-100">Our Wallet</p>#}
{#                        <a href="" class="btn ">coming soon</a>#}
{##}
{#                    </div>#}
{#                    <div class="where-to-buy__item">#}
{#                        <img class="mb-30" src="{% static 'images/w3.png' %}" alt="">#}
{#                        <p class="mb-100">MyEtherWallet</p>#}
{#                        <a href="" class="btn btn-outline">coming soon</a>#}
{##}
{#                    </div>#}
{##}
{#                </div>#}
{##}
{##}
{#                <div class="glide">#}
{#                    <div class="glide__track" data-glide-el="track">#}
{#                        <div class="glide__slides">#}
{#                            <div class="where-to-buy__item">#}
{#                                <img class="mb-30" src="{% static 'images/w1.png' %}" alt="">#}
{#                                <p class="mb-100">Metamask</p>#}
{#                                <a href="" class="btn btn-outline">Купить</a>#}
{##}
{#                            </div>#}
{#                            <div class="where-to-buy__item best-price">#}
{#                                <img class="mb-30" src="{% static 'images/w2.png' %}" alt="">#}
{#                                <p class="mb-100">Наш кошелек</p>#}
{#                                <a href="" class="btn ">Купить</a>#}
{##}
{#                            </div>#}
{#                            <div class="where-to-buy__item">#}
{#                                <img class="mb-30" src="{% static 'images/w3.png' %}" alt="">#}
{#                                <p class="mb-100">MyEtherWallet</p>#}
{#                                <a href="" class="btn btn-outline">Купить</a>#}
{##}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}
{##}
{##}
{##}
{##}
{#            </div>#}
{##}
{##}
{#        </section>#}
    <section class="mb-250"><a name="Howtobuy"></a><a><p class="heading text h3 color-w text-center mb-35">How to buy iToken now:</p> <p class="m-w450 text-center mb-25">Create an Ethereum wallet Metamask or MyEtherWallet.</p> <p class="heading text h4 color-w text-center mb-35">Metamask app:
</p> <p class="m-w450 text-center mb-25">1)Press “add a token” button and paste contract address ( 0x7df30fe21ef5a6390bbcec891155d9f3937eacb6 )<br>
2)After creating “ITN” in your tokens list send Ethereum (Calculating automatically at the current rate to 1$=1ITN) to contracts owner wallet ( 0x9b1B269107703F9BD6AaC8563019e52bc82712ee )<br>
3)ITN be sended on your wallet in few seconds
</p> <p class="heading text h4 color-w text-center mb-35">MyEtherWallet.com
</p></a><p class="m-w450 text-center mb-25"><a>1)Press “+Custom tokens” button in “tokens” block and paste contract address ( 0x7df30fe21ef5a6390bbcec891155d9f3937eacb6 ), symbol “ITN”, decimals “4”<br>
2)After creating “ITN” in your tokens list send Ethereum (Calculating automatically at the current rate to 1$=1ITN) to contracts owner wallet ( 0x9b1B269107703F9BD6AaC8563019e52bc82712ee )<br>
3)ITN be sended on your wallet in few seconds<br> <br>
*all transactions you can check </a><a href="https://etherscan.io/token/0x7df30fe21ef5a6390bbcec891155d9f3937eacb6"><b>there</b></a><b><a></a></b></p><b><a></a></b></section>
    </div>

    <div  class="modal " :class="{modalActive : modal_login }" >
        <div class="modal-dialog buy-modal" >
            <div class="modal-content">
                <span @click="modal_login=false" class="close">&#x2716;</span>
                <div class="modal-body ">
                    <div class="">
                        <div class="modal-header">
                            <p  class="modal-title text-center">Войти</p>
                        </div>
                        <form id="loginForm" action="">{% csrf_token %}
                            <input type="text" class="form-control" v-model="login_email" placeholder="Почта">
                            <input type="text" class="form-control " v-model="password" placeholder="Пароль">
                            <span @click="login" class="btn m-w300 mb-25">войти</span>
                            <p v-if="login_error" class="text color-r mb-25">Проверьте введеные данные</p>
                        </form>

                        <div class="flex-block m-w300">
                            <p style="cursor: pointer" class="text upper color-w">забыли пароль?</p>
                            <p @click="modal_register=true" style="cursor: pointer" class="text upper color-w">регистрация</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div  class="modal " :class="{modalActive : modal_register }" >
        <div class="modal-dialog buy-modal" >
            <div class="modal-content">
                <span @click="modal_register=false, modal_register_step=1" class="close">&#x2716;</span>
                <div class="modal-body ">
                    <div class="">
                        <div class="modal-header">
                            <p  class="modal-title text-center">Регистрация [[modal_register_step]]/2</p>
                        </div>
                        <div  v-if="modal_register_step === 1">
                            <input type="text" class="form-control" v-model="reg_email" placeholder="Введите вашу почту">
                            <input type="text" class="form-control " v-model="reg_login" placeholder="Придумайте логин">
                            <label class="custom-radio mb-20 m-w300" for="q6-1">
                                <input  class="custom-radio-input" id="q6-1" name="q2" v-model="reg_agree"  type="checkbox">Согласен с
                                <a href="" class="text color-b">правилами использования</a> и <a href="" class="text color-b">политикой конфиденциальности</a>
                                <span class="checkmark"></span>
                            </label>
                            <span @click="modal_register_step =2 " :class="{disabled: !reg_agree}" class="btn m-w300 mb-25">дальше</span>
                        </div>
                        <div v-if="modal_register_step === 2">
                            <input type="text" class="form-control" v-model="reg_password1" placeholder="Пароль">
                            <input type="text" class="form-control " v-model="reg_password2" placeholder="Подтверждение пароля">
                            <p v-if="reg_error_text" class="text color-r mb-25">[[reg_error_text]]</p>
                            <span @click="reg" class="btn m-w300 mb-25">готово</span>

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block js %}
    <script src="{% static 'js/glide.min.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script>

        var app = new Vue({
            delimiters: ['[[', ']]'],
            el: '#app',

            data: {
                mobile_menu_active:false,
                modal_login:false,
                login_error:false,
                login_email:'',
                password:'',
                reg_login:'',
                reg_email:'',
                reg_agree:false,
                reg_password1:'',
                reg_password2:'',
                reg_error_text:'',
                modal_register:false,
                modal_register_step:1,
            },
            watch:{

            },
            mounted: function () {
                this.$nextTick(function () {


                })
            },
            computed: {

            },

            methods: {
                login(){
                    console.log(this.login_email)
                    this.login_error=false
                    let body = {
                        'email':this.login_email,
                        'password':this.password
                    }
                    fetch('{% url 'login_req' %}', {
                        method: 'post',
                        body: JSON.stringify(body),
                        headers: { "X-CSRFToken": '{{ csrf_token }}' },
                        credentials: 'same-origin'
                    }).then(res=>res.json())
                        .then(res => {
                            console.log(res)
                            if(res['status']==='success'){
                                location.reload();
                            }
                            else{
                                this.login_error = true
                            }
                        })
                },
                reg(){
                    this.reg_error_text=''
                    let body = {
                        'email':this.reg_email,
                        'username':this.reg_login,
                        'password1':this.reg_password1,
                        'password2':this.reg_password2
                    }
                    fetch('{% url 'register' %}', {
                        method: 'post',
                        body: JSON.stringify(body),
                        headers: { "X-CSRFToken": '{{ csrf_token }}' },
                        credentials: 'same-origin'
                    }).then(res=>res.json())
                        .then(res => {
                            console.log(res)
                            if(res['status']==='error'){


                                if(res['errors']['email']){
                                    this.reg_error_text = this.reg_error_text + res['errors']['email']
                                }
                                if(res['errors']['password2']){
                                    this.reg_error_text = this.reg_error_text + res['errors']['password2']
                                }

                            }
                            else{
                                location.reload();

                            }
                        })
                },


            }
        })
    </script>

    <script>
        var glide = new Glide('.glide', {
            type: 'carousel',
            perView: 1,
            focusAt: 'center',
            //gap: 100,
        })

        glide.mount()



    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {

            var circleProgress = (function(selector) {
                var wrapper = document.querySelectorAll(selector);
                Array.prototype.forEach.call(wrapper, function(wrapper, i) {
                    var wrapperWidth,
                        wrapperHeight,
                        percent,
                        innerHTML,
                        context,
                        lineWidth,
                        centerX,
                        centerY,
                        radius,
                        newPercent,
                        speed,
                        from,
                        to,
                        duration,
                        start,
                        strokeStyle,
                        text;

                    var getValues = function() {
                        wrapperWidth = parseInt(window.getComputedStyle(wrapper).width);
                        wrapperHeight = wrapperWidth;
                        percent = wrapper.getAttribute('data-cp-percentage');
                        innerHTML = '<span class="percentage"><strong>"213123123"+' + percent / 3 + '</strong> </span><canvas class="circleProgressCanvas" width="' + (wrapperWidth * 2) + '" height="' + wrapperHeight * 2 + '"></canvas>';
                        wrapper.innerHTML = innerHTML;
                        text = wrapper.querySelector(".percentage");
                        canvas = wrapper.querySelector(".circleProgressCanvas");
                        wrapper.style.height = canvas.style.width = canvas.style.height = wrapperWidth + "px";
                        context = canvas.getContext('2d');
                        centerX = canvas.width / 2;
                        centerY = canvas.height / 2;
                        newPercent = 0;
                        speed = 1;
                        from = 0;
                        to = percent;
                        duration = 1000;
                        lineWidth = 10;
                        radius = canvas.width / 2 - lineWidth;
                        strokeStyle = wrapper.getAttribute('data-cp-color');
                        start = new Date().getTime();
                    };

                    function animate() {
                        requestAnimationFrame(animate);
                        var time = new Date().getTime() - start;
                        if (time <= duration) {
                            var x = easeInOutQuart(time, from, to - from, duration);
                            newPercent = x;
                            text.innerHTML = `<span class="heading h1 text color-w">${Math.round(newPercent/3)}</span>  <br><span class="text color-w px10">transaction
<br> per 20 minutes</span> `;
                            drawArc();
                        }
                    }

                    function drawArc() {
                        var circleStart = 1.5 * Math.PI;
                        var circleEnd = circleStart + (newPercent / 50) * Math.PI;
                        context.clearRect(0, 0, canvas.width, canvas.height);
                        context.beginPath();
                        context.arc(centerX, centerY, radius, circleStart, 4 * Math.PI, false);
                        context.lineWidth = lineWidth;
                        context.strokeStyle = "#2F2F2F";
                        context.stroke();
                        context.beginPath();
                        context.arc(centerX, centerY, radius, circleStart, circleEnd, false);
                        context.lineWidth = lineWidth;
                        context.strokeStyle = strokeStyle;
                        context.stroke();

                    }
                    var update = function() {
                        getValues();
                        animate();
                    }
                    update();


                    var resizeTimer;
                    window.addEventListener("resize", function() {
                        clearTimeout(resizeTimer);
                        resizeTimer = setTimeout(function() {
                            clearTimeout(resizeTimer);
                            start = new Date().getTime();
                            update();
                        }, 250);
                    });
                });

                //
                // http://easings.net/#easeInOutQuart
                //  t: current time
                //  b: beginning value
                //  c: change in value
                //  d: duration
                //
                function easeInOutQuart(t, b, c, d) {
                    if ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;
                    return -c / 2 * ((t -= 2) * t * t * t - 2) + b;
                }

            });

            circleProgress('.counter');

            // Gibt eine Zufallszahl zwischen min (inklusive) und max (exklusive) zurück
            function getRandom(min, max) {
                return Math.random() * (max - min) + min;
            }
        });
    </script>


{% endblock %}